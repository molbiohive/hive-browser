# Zerg Browser Configuration
# Copy this file to config.local.yaml or config.prod.yaml and adjust values.
# Select config via: ZERG_CONFIG=config/config.local.yaml

server:
  host: "0.0.0.0"
  port: 8080

database:
  url: "postgresql+asyncpg://zerg:zerg@localhost:5432/zerg"

llm:
  base_url: "http://localhost:11434/v1"
  model: "qwen2.5:3b"

blast:
  db_path: "~/.zerg/blast"
  binary: "blastn"

chat:
  storage_dir: "~/.zerg/chats"
  max_history_pairs: 20        # LLM conversation memory depth
  auto_save_after: 2           # save chat after N user messages

watcher:
  root: ~/sequences          # directory to watch for sequence files
  recursive: true
  poll_interval: 5

  rules:
    - match: "*.dna"
      action: parse
      parser: sgffp
      extract: [sequence, features, primers, notes]

    - match: "*.gb"
      action: parse
      parser: biopython
      extract: [sequence, features, description]

    - match: "*.gbk"
      action: parse
      parser: biopython
      extract: [sequence, features, description]

    - match: "*.fasta"
      action: parse
      parser: biopython
      extract: [sequence]

    - match: "*.fa"
      action: parse
      parser: biopython
      extract: [sequence]

    - match: "*.zrt"
      action: parse
      parser: sgffp
      extract: [alignment]

    - match: "*.pdf"
      action: ignore

    - match: "*.docx"
      action: ignore

    - match: "*.png"
      action: ignore

    - match: "*.jpg"
      action: ignore

    - match: ".*"
      action: ignore

    - match: "*"
      action: log
      message: "Unknown file type, skipping"
